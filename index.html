<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accidental Drug Deaths Analysis</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" >
</head>
<body>

    <header>
        
        <h1>Statistical Analysis on Accidental Drug Deaths in Connecticut using Python</h1>
        
        <div class="title-img">
            <nav>
                <ul>
                    <li><a href="#introduction">Introduction</a></li>
                    <li><a href="#data-analysis">Data Analysis</a></li>
                    <li><a href="#visualization">Visualization</a></li>
                    <li><a href="#conclusion">Conclusion</a></li>
                    <li><a href="#references">References</a></li>
                    <li><a href="#Contact">Contact</a></li>
                </ul>
            </nav>
            <a href="https://github.com/kshreya2k/Accidental_Drug_Related_Deaths_CT_Data-Analysis-2012-2022" target="_blank" class="github-link">
                <i class="fa-brands fa-github"></i>
            </a>
        </div>
    </header>
    <div id="main-body">
        <section id="introduction">
            <h2>Introduction</h2>
            <!-- Insert Introduction content here -->
            <div class="main-container">
                <div class="sub-div">
                    <p>
                        The rise in drug use in Connecticut has raised serious health concerns, especially with the increase in accidental drug-related deaths. To tackle this concern, my project conducts a thorough data analysis of accidental drug fatality data in Connecticut from 2012 to 2022. Using the Python programming language and key libraries like Numpy, Matplotlib, SciPy, Pandas, and Seaborn, this study aims to uncover insights into the factors behind the alarming increase in drug-related fatalities.
                    </p>
                    <p>
                        The main goal of this project is to map and summarize evidence, providing a deep understanding of the changing patterns of drug-related deaths using open-source data. Through advanced data science techniques, I aim to break down the rising trend and support public health surveillance in understanding the complex dynamics of drug-related deaths. An essential part of the analysis includes incorporating toxicology results to identify and track specific drugs contributing to the crisis in Connecticut.
                    </p>
                    <p>
                        This project not only addresses immediate concerns about accidental drug deaths but also establishes a foundation for informed policy decisions and targeted interventions. Using data science, the aim is to contribute valuable insights that empower public health authorities to develop effective strategies for reducing the impact of drug-related fatalities in our community.
                    </p>
                </div>
                <div class="sub-div">
                    <img src="images/Drugs_Analysis_Graph.png" alt="Drugs_Analysis_Graph">
                </div>
            </div>
        </section>

       <!------------------------------------->
        <section id="data-analysis">
            <div id="analysis-content">
                <div class="first-inner-div">
                    <div id="data-overview">
                        <h2>Data Overview</h2>
                        <p>The Accidental Drug Related Deaths dataset from 2012-2021 in Connecticut, obtained from the Connecticut Open Data Repository, highlights a significant public health concern. With drug overdoses being a major cause of injury-related deaths in the U.S., this dataset becomes crucial for understanding and addressing this pressing issue (Hedegaard, Minino, & Warner, 2020).</p>
                        <p>The dataset is provided by the Office of the Chief Medical Examiner, offering a valuable resource for understanding and addressing substance abuse and overdose issues. It presents crucial information derived from toxicity reports, death certificates, and scene investigations. The dataset comprises 10.7K rows and 48 columns, with each row representing a drug-related death. It contains key demographic details, including age, race, and gender, are included, along with crucial data on the locations and substances detected in the overdose incidents.</p>
                        <p>This dataset serves as a valuable resource for researchers, policymakers, and healthcare professionals seeking to analyze patterns, identify risk factors, and formulate effective interventions in combating the opioid epidemic. By offering insights into the characteristics and circumstances surrounding accidental drug-related deaths, the dataset plays a pivotal role in shaping evidence-based strategies to mitigate the impact of substance abuse on public health.</p>
                    </div>
                    <div>
                        <p>These are the 48 columns describes the demographics of individuals who died in accidents due to drug toxicity:</p>
                        
                    </div>
                    <div>
                        <table>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Column</th>
                                    <th>Non-Null Count</th>
                                    <th>Dtype</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>0</td><td>Date</td><td class="center">10654</td><td>object</td></tr>
                                <tr><td>1</td><td>Date Type</td><td class="center">10654</td><td>object</td></tr>
                                <tr><td>2</td><td>Age</td><td class="center">10654</td><td>float64</td></tr>
                                <tr><td>3</td><td>Sex</td><td class="center">10654</td><td>object</td></tr>
                                <tr><td>4</td><td>Race</td><td class="center">10654</td><td>object</td></tr>
                                <tr><td>5</td><td>Ethnicity</td><td class="center">1575</td><td>object</td></tr>
                                <tr><td>6</td><td>Residence City</td><td class="center">10476</td><td>object</td></tr>
                                <tr><td>7</td><td>Residence County</td><td class="center">9486</td><td>object</td></tr>
                                <tr><td>8</td><td>Residence State</td><td class="center">8756</td><td>object</td></tr>
                                <tr><td>9</td><td>Injury City</td><td class="center">10476</td><td>object</td></tr>
                                <tr><td>10</td><td>Injury County</td><td class="center">7372</td><td>object</td></tr>
                                <tbody class="more-content">
                                    <tr><td>11</td><td>Injury State</td><td class="center">7741</td><td>object</td></tr>
                                    <tr><td>12</td><td>Injury Place</td><td class="center">10654</td><td>object</td></tr>
                                    <tr><td>13</td><td>Description of Injury</td><td class="center">9850</td><td>object</td></tr>
                                    <tr><td>14</td><td>Death City</td><td class="center">9197</td><td>object</td></tr>
                                    <tr><td>15</td><td>Death County</td><td class="center">8090</td><td>object</td></tr>
                                    <tr><td>16</td><td>Death State</td><td class="center">6873</td><td>object</td></tr>
                                    <tr><td>17</td><td>Location</td><td class="center">10632</td><td>object</td></tr>
                                    <tr><td>18</td><td>Location if Other</td><td class="center">1194</td><td>object</td></tr>
                                    <tr><td>19</td><td>Cause of Death</td><td class="center">10654</td><td>object</td></tr>
                                    <tr><td>20</td><td>Manner of Death</td><td class="center">10654</td><td>object</td></tr>
                                    <tr><td>21</td><td>Other Significant Conditions</td><td class="center">1010</td><td>object</td></tr>
                                    <tr><td>22</td><td>Heroin</td><td class="center">3110</td><td>object</td></tr>
                                    <tr><td>23</td><td>Heroin death certificate (DC)</td><td class="center">740</td><td>object</td></tr>
                                    <tr><td>24</td><td>Cocaine</td><td class="center">3855</td><td>object</td></tr>
                                    <tr><td>25</td><td>Fentanyl</td><td class="center">6925</td><td>object</td></tr>
                                    <tr><td>26</td><td>Fentanyl Analogue</td><td class="center">804</td><td>object</td></tr>
                                    <tr><td>27</td><td>Oxycodone</td><td class="center">950</td><td>object</td></tr>
                                    <tr><td>28</td><td>Oxymorphone</td><td class="center">157</td><td>object</td></tr>
                                    <tr><td>29</td><td>Ethanol</td><td class="center">2878</td><td>object</td></tr>
                                    <tr><td>30</td><td>Hydrocodone</td><td class="center">163</td><td>object</td></tr>
                                    <tr><td>31</td><td>Benzodiazepine</td><td class="center">2493</td><td>object</td></tr>
                                    <tr><td>32</td><td>Methadone</td><td class="center">938</td><td>object</td></tr>
                                    <tr><td>33</td><td>Meth/Amphetamine</td><td class="center">127</td><td>object</td></tr>
                                    <tr><td>34</td><td>Amphet</td><td class="center">359</td><td>object</td></tr>
                                    <tr><td>35</td><td>Tramad</td><td class="center">284</td><td>object</td></tr>
                                    <tr><td>36</td><td>Hydromorphone</td><td class="center">67</td><td>object</td></tr>
                                    <tr><td>37</td><td>Morphine (Not Heroin)</td><td class="center">55</td><td>object</td></tr>
                                    <tr><td>38</td><td>Xylazine</td><td class="center">792</td><td>object</td></tr>
                                    <tr><td>39</td><td>Gabapentin</td><td class="center">3459</td><td>object</td></tr>
                                    <tr><td>40</td><td>Opiate NOS</td><td class="center">3719</td><td>object</td></tr>
                                    <tr><td>41</td><td>Heroin/Morph/Codeine</td><td class="center">401</td><td>object</td></tr>
                                    <tr><td>42</td><td>Other Opioid</td><td class="center">128</td><td>object</td></tr>
                                    <tr><td>43</td><td>Any Opioid</td><td class="center">7620</td><td>object</td></tr>
                                    <tr><td>44</td><td>Other</td><td class="center">692</td><td>object</td></tr>
                                    <tr><td>45</td><td>ResidenceCityGeo</td><td class="center">10488</td><td>object</td></tr>
                                    <tr><td>46</td><td>InjuryCityGeo</td><td class="center">10488</td><td>object</td></tr>
                                    <tr><td>47</td><td>DeathCityGeo</td><td class="center">10653</td><td>object</td></tr>
                                </tbody>
                            </tbody>
                        </table>
                        <button class="show-more-button" onclick="toggleTable()">Read More...</button>

                        <!-- Container to display the table -->
                        <div id="table-container"></div>
                    </div>
                    <div id="data-overview">
                        <h2>Data Cleaning</h2>
                        <p>Data cleaning is a critical step in preparing the dataset for analysis. The dataset contains various demographic and incident-related attributes, and it is essential to ensure its quality and reliability. The following steps were undertaken to clean the data:</p>

                        <h4>1. Loading the Dataset</h4>
                        <pre>
                    url = r"C:\Users\shrey\Documents\1st_Sem_Study\Projects\Accidental_Drug_Related_Deaths_CT\Accidental_Drug_Related_Deaths_2012-2022.csv"
                    df = pd.read_csv(url)
                        </pre>

                        <h4>2. Initial Exploration</h4>
                        <pre>
                    df.info()
                        </pre>

                        <h4>3. Identifying Missing Values</h4>
                        <pre>
                    df.isnull().sum()
                        </pre>

                    <h4>4. Handling Missing Values</h4>
                    <p>For numeric columns, missing values were replaced with <strong>0</strong>. For object (non-numeric) columns, missing values were filled with <strong>"Not given"</strong>.</p>
                    <pre>
                numeric_columns = df.select_dtypes(include=np.number).columns
                df[numeric_columns] = df[numeric_columns].fillna(0)

                object_columns = df.select_dtypes(exclude=np.number).columns
                df[object_columns] = df[object_columns].fillna("Not given")
                    </pre>

                    <h4>5. Removing Duplicates</h4>
                    <pre>
                df.drop_duplicates(inplace=True)
                    </pre>

                    <h4>6. Final Check for Missing Values</h4>
                    <pre>
                df.isnull().sum()
                    </pre>

                    <h4>7. Data Summary</h4>
                    <pre>
                print("Basic Statistics:")
                print(df.describe())
                    </pre>

                    <p>By following these steps, the dataset was thoroughly cleaned and prepared for in-depth statistical analysis and exploratory data analysis (EDA). The resulting DataFrame is now a reliable source for insights into accidental drug-related deaths in Connecticut.</p>
                </div>
            </div>

        </section>
        <!------------------------------------->


        <section id="visualization">
            <h2>Visualization</h2>
                <div id="graph-part-1">
                    <div id="graph">
                        <img src="images/Deaths_over_time(Date).png" alt="Number of Deaths Over Time" >
                        <h4>(Number of Deaths Over Time)</h4>
                    </div>
                    <div id="graph">
                        <img src="images/Distribution_Deaths_by_Sex.png" alt="Distribution of Deaths by Sex" >
                        <h4>(Distribution of Deaths by Sex)</h4>
                    </div>
                </div>

                <div id="graph-part">
                    <div id="graph">
                        <img src="images/Distribution_of_Age.png" alt="Distribution of Age" >
                        <h4>(Distribution of Age)</h4>
                    </div>

                    <div id="graph">
                        <img src="images/Individuals_by_Race.png" alt="Count of Individuals by Race" >
                        <h4>(Count of Individuals by Race)</h4>
                    </div>
                </div>
                
                <div id="graph-part">
                    <div id="graph">
                        <img src="images/Count_Individuals_Location.png" alt="Count of Individuals by Location" >
                        <h4>(Count of Individuals by Location)</h4>
                    </div>

                    <div id="graph">
                        <img src="images/Drugs_Analysis_Graph.png" alt="Count of Drug Mentions in Death Certificates" >
                        <h4>(Count of Drug Mentions in Death Certificates)</h4>
                    </div>
                </div>
            
        </section>

        <section id="conclusion">
            <h2>Conclusion</h2>
            <!-- Insert Conclusion content here -->
            <p>The comprehensive analysis of the dataset on accidental drug fatalities in Connecticut from 2012 to 2022 provides critical insights into age distribution and demographic patterns, which are essential for informing public health strategies and policy decisions. The findings indicate a mean age of 43.5 years and a standard deviation of approximately 12.6, suggesting that the majority of individuals affected by these incidents are in their middle age. The age range extends from newborns to individuals as old as 87, highlighting the pervasive nature of the drug crisis across various life stages.           </p>
            <p>A significant observation is the pronounced gender disparity in the data, with males comprising 74% of the fatalities. This suggests a critical need for targeted intervention programs aimed at men, as well as a reevaluation of existing support structures to address the unique challenges faced by this demographic. The modal age of 36 further emphasizes a specific group particularly vulnerable to drug-related incidents, warranting focused prevention efforts and community outreach tailored to this age cohort.            </p>
            <p>Moreover, the dataset reveals gaps in demographic data, particularly regarding race and ethnicity, with notable non-response rates in these categories. This lack of complete data could hinder the development of effective, tailored public health interventions. Addressing these gaps through enhanced data collection methodologies will be crucial for future analyses.            </p>
            <p>Additionally, the variations in non-null counts across various demographic columns, such as residence and injury details, indicate areas where improved data collection could yield richer insights. Understanding the geographical distribution of fatalities may uncover regional trends and hotspots, allowing for more localized intervention strategies.            </p>
            <p>Overall, these findings underscore the urgent need for continued research and data collection to combat the rising tide of drug-related fatalities. Enhanced public awareness campaigns, targeted intervention programs, and policy reforms, grounded in empirical data, are imperative to mitigate this public health crisis effectively. By leveraging the insights gained from this analysis, stakeholders can work collaboratively to develop comprehensive strategies that address the underlying factors contributing to accidental drug fatalities, ultimately fostering healthier communities across Connecticut.            </p>

        </section>

        <section id="references">
            <h2>References</h2>
            <!-- Insert References content here -->
            <p>
                Data source: Connecticut Data (2021). Accidental Drug-Related Deaths 2012-2021. Retrieved from
                <a href="https://data.ct.gov/Health-and-Human-Services/Accidental-Drug-Related-Deaths-2012-2022/rybz-nyjw" target="_blank">https://data.ct.gov/Health-and-Human-Services/Accidental-Drug-Related-Deaths-2012-2022/rybz-nyjw</a>
            </p>
            <p>
                Additional information from Centers for Disease Control and Prevention (CDC) (2021, November 17). New CDC data show drug overdose deaths increased in 2020, driven by synthetic opioids. Retrieved from
                <a href="https://www.cdc.gov/nchs/pressroom/nchs_press_releases/2021/20211117.html" target="_blank">https://www.cdc.gov/nchs/pressroom/nchs_press_releases/2021/20211117.html</a>
            </p>
            <p>
                Color palette documentation is used for data visualization from
                <a href="https://seaborn.pydata.org/index.html" target="_blank">https://seaborn.pydata.org/index.html</a>
            </p>
        
            <p>
                Reference retrieved from
                <a href="https://merishnasuwal.github.io/drug-deaths-data-analysis" target="_blank">https://merishnasuwal.github.io/drug-deaths-data-analysis</a>
            </p>
            <p>
                Exploratory Data Analysis using Python, International Journal of Innovative Technology and Exploring Engineering (IJITEE), ISSN: 2278-3075, Volume-8, Issue-12, October 2019. Retrieved from
                <a href="https://www.researchgate.net/profile/Dr-Subhendu-Pani/publication/337146539_IJITEE/links/5dc70b124585151435fb427e/IJITEE.pdf" target="_blank">https://www.researchgate.net/profile/Dr-Subhendu-Pani/publication/337146539_IJITEE/links/5dc70b124585151435fb427e/IJITEE.pdf</a>
            </p>
            <p>
                Github icon image is retrieved from
                <a href="https://fontawesome.com/icons/github?f=brands&s=solid" target="_blank">https://fontawesome.com/icons/github?f=brands&s=solid</a>
            </p>
            
        </section>
        <section id="Contact">
            <h2> Contact </h2>
            <p>
                Thank you for checking my project. Hope you find it helpful.
            </p>
            <p>
                Feel free to reach out to me! I'm open to collaboration, feedback, and connecting with fellow enthusiasts. You can contact me at shreyabanik2k@gmail.com or connect with me on LinkedIn.
            </p>
        </section>
    </div>
    <script>
        // JavaScript code for handling section clicks and displaying/hiding content
        document.addEventListener('DOMContentLoaded', function() {
            var sections = ['introduction', 'data-analysis', 'visualization', 'conclusion', 'references','Contact'];

            sections.forEach(function(section) {
                var link = document.querySelector('a[href="#' + section + '"]');
                var content = document.getElementById(section);

                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    hideAllSections();
                    content.style.display = 'block';
                });
            });

            function hideAllSections() {
                sections.forEach(function(section) {
                    document.getElementById(section).style.display = 'none';
                });
            }
        });

        function toggleTable() {
            const moreContent = document.querySelector('.more-content');
            const button = document.querySelector('.show-more-button');
            if (moreContent.style.display === "none") {
                moreContent.style.display = "table-row-group";
                button.textContent = "Show Less...";
            } else {
                moreContent.style.display = "none";
                button.textContent = "Read More...";
            }
        }
    
        function printCode() {
           // Replace this with the actual code you want to print
           var codeToPrint =  `
# Import Libraries
import numpy as np
import matplotlib.pyplot as plt
from scipy import stats
import pandas as pd
import seaborn as sns

#to ignore warnings
import warnings
warnings.filterwarnings('ignore')

# Load Dataset
### Here is a sample of five rows of the data:
# Path to the dataset
url = r"C:\\Users\\shrey\\Documents\\1st_Sem_Study\\Projects\\Accidental_Drug_Related_Deaths_CT\\Accidental_Drug_Related_Deaths_2012-2022.csv"
df = pd.read_csv(url)
 
# Printing the data
df.head(5)
### The data set contains the following columns that describe the demographics of the patients such as their age, race, ethnicity, location and the kind of drug toxicity
df.info()

# Data Cleaning
df.isnull().sum()
# Replace blanks with 0 for numeric columns
numeric_columns = df.select_dtypes(include=np.number).columns
df[numeric_columns] = df[numeric_columns].fillna(0)

# Replace blanks with "Not given" for object (non-numeric) columns
object_columns = df.select_dtypes(exclude=np.number).columns
df[object_columns] = df[object_columns].fillna("Not given")
df.isnull().sum()

# Remove duplicates
df.drop_duplicates(inplace=True)
df.info()

# Statistical Analysis
# Display statistics
print("Basic Statistics:")
print(df.describe())
# Age column statistics
sample_Age = df['Age']

mean_Age = np.mean(sample_Age)
median_Age = np.median(sample_Age)
mode_Age = stats.mode(sample_Age)

print(f"Mean Age: {mean_Age.round()}")
print(f"Median Age: {median_Age.round()}")
print(f"Mode Age: {mode_Age}")
range_Age = np.ptp(sample_Age)
variance_Age = np.var(sample_Age)
std_dev_Age = np.std(sample_Age)

print(f"Range of Ages: {range_Age}")
print(f"Variance of Ages: {variance_Age}")
print(f"Standard Deviation of Ages: {std_dev_Age}")

# Gender column summary
Gender_summary = df['Sex'].value_counts()
print("\nGender Summary:")
print(Gender_summary)

# Exploratory Data Analysis (EDA)

## Part 1 : Data Visualization on categorial columns
df['Date'] = pd.to_datetime(df['Date'], format='%m/%d/%Y')

# Sort the DataFrame by the 'Date' column
df.sort_values('Date', inplace=True)

# Plot the line graph
plt.figure(figsize=(12, 6))
sns.lineplot(x='Date', y=df.index, data=df)
plt.title('Number of Deaths Over Time')
plt.xlabel('Date')
plt.ylabel('Number of Deaths')

# Save the graph as an image file
plt.savefig('Deaths_over_time(Date).png')

plt.show()
# Visualize Age distribution
plt.figure(figsize=(10, 6))
sns.histplot(df['Age'], bins=30, kde=True)
plt.title('Distribution of Age')
plt.xlabel('Age')
plt.ylabel('Frequency')

# Save the graph as an image file
plt.savefig('Distribution_of_Age.png')

plt.show()



# Visualize the count of different races
plt.figure(figsize=(10, 6))
sns.countplot(x='Race', data=df, order=df['Race'].value_counts().index, color='skyblue')
plt.title('Count of Individuals by Race')
plt.xlabel('Race')
plt.ylabel('Count')
plt.xticks(rotation=90)

plt.savefig('Individuals_by_Race.png')

plt.show()


# Visualize the count of deaths by Sex with different colors for each gender
sex_counts = df['Sex'].value_counts()

# Create a pie chart
plt.figure(figsize=(10,6))
plt.pie(sex_counts, labels=sex_counts.index, autopct='%1.1f%%', colors=['green', 'pink','violet'], wedgeprops=dict(width=0.3, edgecolor='gray'))
plt.title('Distribution of Deaths by Sex')

plt.savefig('Distribution_Deaths_by_Sex.png')

plt.show()

## Part 2 : Count of Individuals by Location
import matplotlib.pyplot as plt
import seaborn as sns

# Assuming df is your DataFrame
plt.figure(figsize=(10, 8))
sns.countplot(y='Location', data=df, order=df['Location'].value_counts().index, palette='Set2')
plt.title('Count of Individuals by Location')
plt.ylabel('Location')
plt.xlabel('Count')

plt.savefig('Count_Individuals_Location.png')
plt.show()



## Part 3 : Type of Drug Distribution 
# Replace 'df' with your actual DataFrame name

# List of categorical columns
categorical_columns = ['Heroin', 'Heroin death certificate (DC)', 'Cocaine', 'Fentanyl', 'Fentanyl Analogue',
                        'Oxycodone', 'Oxymorphone', 'Ethanol', 'Hydrocodone', 'Benzodiazepine', 'Methadone',
                        'Meth/Amphetamine', 'Amphet', 'Tramad', 'Hydromorphone', 'Morphine (Not Heroin)',
                        'Xylazine', 'Gabapentin', 'Opiate NOS', 'Heroin/Morph/Codeine', 'Other Opioid', 'Any Opioid']

# Create a new DataFrame for numerical representation
numerical_df = pd.DataFrame()

# Convert categorical columns to numerical
for column in categorical_columns:
    numerical_df[column] = df[column].apply(lambda x: 1 if x == 'Y' else 0)

# Display the resulting numerical DataFrame
print(numerical_df.head())

print(numerical_df.info())

import matplotlib.pyplot as plt
import seaborn as sns

# Specify the columns of interest
drug_columns = ['Heroin', 'Heroin death certificate (DC)', 'Cocaine', 'Fentanyl', 'Fentanyl Analogue',
                'Oxycodone', 'Oxymorphone', 'Ethanol', 'Hydrocodone', 'Benzodiazepine', 'Methadone',
                'Meth/Amphetamine', 'Amphet', 'Tramad', 'Hydromorphone', 'Morphine (Not Heroin)',
                'Xylazine', 'Gabapentin', 'Opiate NOS', 'Heroin/Morph/Codeine', 'Other Opioid', 'Any Opioid']

# Create a subset DataFrame with the specified columns
drug_data = df[drug_columns]

# Calculate the counts for each drug
drug_counts = drug_data.sum()

# Plot the counts using a horizontal bar chart with logarithmic scale
plt.figure(figsize=(10, 8))
sns.barplot(x=drug_counts.values, y=drug_counts.index, palette='viridis')
plt.xscale('log')  # Use logarithmic scale on the x-axis
plt.title('Count of Drug Mentions in Death Certificates')
plt.xlabel('Count (log scale)')
plt.ylabel('Type of Drugs')

# Adjust layout to prevent cutting off labels
plt.tight_layout()

# Save the figure
plt.savefig('Drugs_Analysis_Graph.png')

plt.show()`;

            // Get the code container
            var codeContainer = document.getElementById('code-container');

            // Display the code in the code container
            codeContainer.innerText = codeToPrint;

            // Toggle the visibility of the code container
            codeContainer.style.display = (codeContainer.style.display === 'none') ? 'block' : 'none';
        }
    </script>

</body>
</html>
